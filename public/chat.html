<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Chatsphere - Chat</title>
<script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
<style>
  /* ====== Reset and base ====== */
  * {
    box-sizing: border-box;
  }
  body {
    font-family: 'Roboto', 'Segoe UI', sans-serif;
    margin: 0;
    height: 100vh;
    display: flex;
    background-color: #36393f;
    color: #dcddde;
  }

  /* ====== Sidebar ====== */
  .sidebar {
    width: 260px;
    background-color: #2f3136;
    display: flex;
    flex-direction: column;
    padding: 20px 12px;
    box-shadow: 2px 0 5px rgba(0,0,0,0.5);
    justify-content: space-between;
  }

  .sidebar-top {
    display: flex;
    flex-direction: column;
  }

  .sidebar h3 {
    font-weight: 600;
    font-size: 1.6rem;
    margin-bottom: 20px;
    padding-left: 8px;
  }

  #chatList {
    list-style: none;
    padding: 0;
    margin: 0;
    max-height: calc(100vh - 170px);
    overflow-y: auto;
  }
  #chatList li {
    padding: 10px 15px;
    margin-bottom: 6px;
    border-radius: 8px;
    cursor: pointer;
    color: #b9bbbe;
    transition: background-color 0.2s ease;
  }
  #chatList li:hover,
  #chatList li.active {
    background-color: #393c43;
    color: white;
  }

  #newChatBtn {
    margin-top: 12px;
    background-color: #5865f2;
    color: white;
    font-weight: 600;
    border: none;
    padding: 12px 0;
    border-radius: 8px;
    cursor: pointer;
    width: 100%;
    transition: background-color 0.2s ease;
  }
  #newChatBtn:hover {
    background-color: #4752c4;
  }

  /* Logout Button - placed at bottom of sidebar */
  #logoutBtn {
    background-color: #ed4245;
    color: white;
    border: none;
    border-radius: 8px;
    padding: 12px 0;
    cursor: pointer;
    font-weight: 600;
    width: 100%;
    transition: background-color 0.2s ease;
  }
  #logoutBtn:hover {
    background-color: #b73236;
  }

  /* ====== Chat Window ====== */
  .chat-window {
    flex: 1;
    display: flex;
    flex-direction: column;
    background-color: #36393f;
    padding: 20px;
    position: relative;
  }

  /* Empty state message */
  #emptyState {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #72767d;
    font-size: 1.3rem;
    font-style: italic;
    user-select: none;
  }

  /* Messages container */
  #messages {
    flex: 1;
    overflow-y: auto;
    padding-right: 8px;
  }

  /* Individual messages */
  .message {
    max-width: 70%;
    padding: 10px 15px;
    border-radius: 20px;
    margin-bottom: 10px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.3);
    word-break: break-word;
    color: #dcddde;
  }
  .message.other {
    background-color: #40444b;
    align-self: flex-start;
  }
  .message.self {
    background-color: #5865f2;
    color: white;
    align-self: flex-end;
  }

  /* ====== Input area ====== */
  form {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 10px;
  }

  #messageInput {
    flex-grow: 1;
    padding: 12px 15px;
    border-radius: 20px;
    border: none;
    background-color: #40444b;
    color: #dcddde;
    font-size: 1rem;
  }
  #messageInput:focus {
    outline: none;
    box-shadow: 0 0 0 2px #5865f2;
  }

  button, #emojiBtn, #stickerBtn {
    border: none;
    cursor: pointer;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    background-color: #4f545c;
    color: white;
    font-size: 1.3rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s ease;
  }
  button:hover, #emojiBtn:hover, #stickerBtn:hover {
    background-color: #5865f2;
  }

  #sendBtn {
    border-radius: 20px;
    padding: 10px 20px;
    width: auto;
    font-weight: 600;
    background-color: #5865f2;
    font-size: 1rem;
  }
  #sendBtn:hover {
    background-color: #4752c4;
  }

  /* File input style (hidden) */
  #fileInput {
    display: none;
  }

  /* Emoji & Sticker Panels */
  #emojiPanel, #stickerPanel {
    position: absolute;
    bottom: 70px;
    left: 20px;
    background-color: #2f3136;
    border-radius: 12px;
    padding: 10px;
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    box-shadow: 0 8px 20px rgba(0,0,0,0.5);
    display: none;
    max-width: 280px;
    z-index: 100;
  }

  #emojiPanel span, #stickerPanel img {
    cursor: pointer;
    font-size: 1.6rem;
    transition: transform 0.2s ease;
  }

  #emojiPanel span:hover, #stickerPanel img:hover {
    transform: scale(1.3);
  }
</style>
</head>
<body>

<div class="sidebar">
  <div class="sidebar-top">
    <h3>Chats</h3>
    <ul id="chatList">
      <!-- Dynamic chats go here -->
    </ul>
    <button id="newChatBtn">+ New Private Chat</button>
  </div>
  <button id="logoutBtn">Logout</button>
</div>

<div class="chat-window">
  <div id="emptyState">No Chat Currently Open!</div>
  <div id="messages" style="display:none;"></div>

  <!-- Emoji & Sticker Panels -->
  <div id="emojiPanel">
    <span>üòÄ</span><span>üòÇ</span><span>üòç</span><span>üòé</span>
    <span>ü•≥</span><span>üò¢</span><span>ü§î</span><span>üò°</span>
  </div>
  <div id="stickerPanel">
    <img src="https://i.imgur.com/1.png" width="50" height="50" alt="Sticker1" />
    <img src="https://i.imgur.com/2.png" width="50" height="50" alt="Sticker2" />
    <img src="https://i.imgur.com/3.png" width="50" height="50" alt="Sticker3" />
  </div>

  <form id="messageForm" style="display:none;">
    <input type="text" id="messageInput" placeholder="Message #general..." autocomplete="off" required />
    <button type="submit" id="sendBtn">Send</button>
    <button type="button" id="emojiBtn" title="Insert Emoji">üòÉ</button>
    <button type="button" id="stickerBtn" title="Insert Sticker">üé¥</button>
    <label for="fileInput" title="Attach File" style="cursor:pointer;">
      <button type="button" style="background:#4f545c; border-radius:50%; width:40px; height:40px; font-size:1.3rem;">üìé</button>
    </label>
    <input type="file" id="fileInput" accept="image/*,video/*" />
  </form>
</div>

<script>
  // Elements
  const emojiBtn = document.getElementById('emojiBtn');
  const stickerBtn = document.getElementById('stickerBtn');
  const emojiPanel = document.getElementById('emojiPanel');
  const stickerPanel = document.getElementById('stickerPanel');
  const input = document.getElementById('messageInput');
  const emptyState = document.getElementById('emptyState');
  const messages = document.getElementById('messages');
  const messageForm = document.getElementById('messageForm');
  const chatList = document.getElementById('chatList');
  const newChatBtn = document.getElementById('newChatBtn');

  // Toggle emoji panel
  emojiBtn.addEventListener('click', () => {
    emojiPanel.style.display = emojiPanel.style.display === 'flex' ? 'none' : 'flex';
    stickerPanel.style.display = 'none';
  });

  // Toggle sticker panel
  stickerBtn.addEventListener('click', () => {
    stickerPanel.style.display = stickerPanel.style.display === 'flex' ? 'none' : 'flex';
    emojiPanel.style.display = 'none';
  });

  // Insert emoji into input
  emojiPanel.querySelectorAll('span').forEach(e => {
    e.addEventListener('click', () => {
      input.value += e.textContent;
      input.focus();
    });
  });

  // Insert sticker placeholder text
  stickerPanel.querySelectorAll('img').forEach(s => {
    s.addEventListener('click', () => {
      input.value += `[sticker:${s.src}]`;
      input.focus();
    });
  });

  // New chat creation
  newChatBtn.addEventListener('click', () => {
    const chatName = prompt('Enter the name for the new private chat:');
    if (chatName) {
      const li = document.createElement('li');
      li.textContent = chatName;
      li.classList.add('active');
      chatList.querySelectorAll('li').forEach(item => item.classList.remove('active'));
      chatList.appendChild(li);

      // Show chat window
      emptyState.style.display = 'none';
      messages.style.display = 'block';
      messageForm.style.display = 'flex';

      messages.innerHTML = `<div class="message other">Welcome to the chat: <strong>${chatName}</strong></div>`;
    }
  });

  // Click chat list item to activate chat
  chatList.addEventListener('click', (e) => {
    if (e.target.tagName === 'LI') {
      chatList.querySelectorAll('li').forEach(item => item.classList.remove('active'));
      e.target.classList.add('active');

      emptyState.style.display = 'none';
      messages.style.display = 'block';
      messageForm.style.display = 'flex';

      messages.innerHTML = `<div class="message other">Chat with <strong>${e.target.textContent}</strong> opened.</div>`;
    }
  });

  // Simple message send handler (demo)
  messageForm.addEventListener('submit', (e) => {
    e.preventDefault();
    if (!input.value.trim()) return;

    const msgDiv = document.createElement('div');
    msgDiv.className = 'message self';
    msgDiv.textContent = input.value;
    messages.appendChild(msgDiv);
    input.value = '';
    messages.scrollTop = messages.scrollHeight;
  });
</script>

</body>
</html>
